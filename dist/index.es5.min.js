/*!
 * ~
 *  maishu-chitu-service v1.15.0
 *  https://github.com/ansiboy/services-sdk
 *  
 *  Copyright (c) 2016-2018, shu mai <ansiboy@163.com>
 *  Licensed under the MIT License.
 * 
 */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}("undefined"==typeof window?global:window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.funcs=new Array}var t,n,o;return t=e,(n=[{key:"add",value:function(e){this.funcs.push(e)}},{key:"remove",value:function(e){this.funcs=this.funcs.filter(function(t){return t!=e})}},{key:"fire",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.funcs.forEach(function(e){return e.apply(void 0,t)})}}])&&r(t.prototype,n),o&&r(t,o),e}();t.Callback=o,t.Callbacks=function(){return new o}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(2),l=n(2);t.Errors=l.Errors;var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,i(t).apply(this,arguments))}var n,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,c.Errors),n=t,(r=[{key:"unexpectedNullValue",value:function(e){var t="variable ".concat(e," is unexpected null value.");return new Error(t)}}])&&o(n.prototype,r),l&&o(n,l),t}();t.errors=new s},function(e,t,n){(function(t){
/*!
 * ~
 *  maishu-toolkit v1.0.0
 *  https://github.com/ansiboy/toolkit
 *  
 *  Copyright (c) 2016-2018, shu mai <ansiboy@163.com>
 *  Licensed under the MIT License.
 * 
 */
var n;"undefined"==typeof window||window,n=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./out/index.js")}({"./out/errors.js":
/*!***********************!*\
  !*** ./out/errors.js ***!
  \***********************/
/*! no static exports found */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{argumentNull(e){let t=new Error(`Argument ${e} cannt be null or emtpy.`);return t.name="argumentNull",t}routeDataFieldNull(e){let t=new Error(`The ${e} field of route data cannt be null.`);return t.name="routeDataFieldNull",t}argumentFieldNull(e,t){let n=new Error(`The ${e} field of ${t} cannt be null.`);return n.name="argumentFieldNull",n}argumentTypeIncorrect(e,t){let n=new Error(`Argument ${e} type error, expected type is ${t}.`);return n.name="argumentTypeIncorrect",n}}t.Errors=r,t.errors=new r},"./out/guid.js":
/*!*********************!*\
  !*** ./out/guid.js ***!
  \*********************/
/*! no static exports found */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},"./out/index.js":
/*!**********************!*\
  !*** ./out/index.js ***!
  \**********************/
/*! no static exports found */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(/*! ./guid */"./out/guid.js");t.guid=r.guid;var o=n(/*! ./path */"./out/path.js");t.pathContact=o.pathContact;var u=n(/*! ./errors */"./out/errors.js");t.Errors=u.Errors},"./out/path.js":
/*!*********************!*\
  !*** ./out/path.js ***!
  \*********************/
/*! no static exports found */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pathContact=function(...e){if(0==(e=e||[]).length)return"";if(1==e.length)return e[0];let t=e.join("");return t=t.replace(/\/+/g,"/")}}})},e.exports=n()}).call(this,n(5))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4);t.Service=r.Service;var o=n(0);t.Callback=o.Callback,t.Callbacks=o.Callbacks;var u=n(6);t.ValueStore=u.ValueStore,t.LocalValueStore=u.LocalValueStore,t.CookieValueStore=u.CookieValueStore;var i=n(7);t.guid=i.guid;var a=n(1);t.Errors=a.Errors;var c=n(8);t.StatusCodes=c.StatusCode,t.StatusCode=c.StatusCode},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var __awaiter=function(e,t,n,r){return new(n||(n=Promise))(function(o,u){function i(e){try{c(r.next(e))}catch(e){u(e)}}function a(e){try{c(r.throw(e))}catch(e){u(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});var callback_1=__webpack_require__(0),errors_1=__webpack_require__(1),Service=function(){function e(t){var n=this;_classCallCheck(this,e),this.error=callback_1.Callbacks(),t&&this.error.add(function(e,r){t(r,n)})}return _createClass(e,[{key:"ajax",value:function(t,n){var r=this;void 0===n&&(n={});var o,u=n.data,i=n.method,a=n.headers||{};if(null!=u)if((a["content-type"]||"").indexOf("json")>=0)o=JSON.stringify(u);else for(var c in o=new URLSearchParams,u)o.append(c,u[c]);return new Promise(function(n,u){var c,l={headers:a,body:o,method:i};if(null==l)throw errors_1.errors.unexpectedNullValue("options");"get"==i&&(c=setTimeout(function(){console.warn("timeout url: ".concat(t));var e=new Error;e.name="timeout",e.message="网络连接超时",u(e),r.error.fire(r,e),clearTimeout(c)},1e3*e.settings.ajaxTimeout)),_ajax(t,l).then(function(e){n(e),c&&clearTimeout(c)}).catch(function(e){u(e),r.error.fire(r,e),c&&clearTimeout(c)})})}},{key:"createService",value:function(t){var n=this,r=new(t=t||e);return r.error.add(function(e,t){n.error.fire(r,t)}),r}},{key:"getByJson",value:function(e,t){t&&Object.getOwnPropertyNames(t).length>0&&(e="".concat(e,"?").concat(encodeURIComponent(JSON.stringify(t))));return this.ajax(e,{headers:{"content-type":"application/json"},method:"get"})}},{key:"putByJson",value:function(e,t){return this.ajax(e,{headers:{"content-type":"application/json"},data:t,method:"put"})}},{key:"postByJson",value:function(e,t){return this.ajax(e,{headers:{"content-type":"application/json"},data:t,method:"post"})}},{key:"deleteByJson",value:function(e,t){return this.ajax(e,{headers:{"content-type":"application/json"},data:t,method:"delete"})}},{key:"isEncoded",value:function(e){try{return(e=e||"")!==decodeURIComponent(e)}catch(e){return!1}}},{key:"get",value:function(e,t){t=t||{};var n="";for(var r in t)if(null!=t[r]){var o="".concat(t[r]);this.isEncoded(o)||(o=encodeURIComponent(o)),n=n?"".concat(n,"&").concat(r,"=").concat(o):"".concat(r,"=").concat(o)}return n&&(e="".concat(e,"?").concat(n)),this.ajax(e,{method:"get"})}},{key:"put",value:function(e,t){return this.ajax(e,{headers:{"content-type":"application/x-www-form-urlencoded"},data:t,method:"put"})}},{key:"post",value:function(e,t){return this.ajax(e,{headers:{"content-type":"application/x-www-form-urlencoded"},data:t,method:"post"})}},{key:"delete",value:function(e,t){return this.ajax(e,{headers:{"content-type":"application/x-www-form-urlencoded"},data:t,method:"delete"})}}]),e}();function _ajax(url,options){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark(function _callee(){var response,responseText,p,text,textObject,isJSONContextType,err;return regeneratorRuntime.wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if("undefined"!=typeof window){_context.next=6;break}return _context.next=3,eval("require")("node-fetch")(url,options);case 3:response=_context.sent,_context.next=9;break;case 6:return _context.next=8,fetch(url,options);case 8:response=_context.sent;case 9:return responseText=response.text(),p="string"==typeof responseText?new Promise(function(e,t){e(responseText)}):responseText,_context.next=13,responseText;case 13:if(text=_context.sent,isJSONContextType=(response.headers.get("content-type")||"").indexOf("json")>=0,textObject=isJSONContextType?text?JSON.parse(text):{}:text,!(response.status>=300)){_context.next=23;break}throw err=new Error,err.method=options.method,err.name="".concat(response.status),err.message=isJSONContextType?textObject.Message||textObject.message||"":textObject,err.message=err.message||response.statusText,err;case 23:return _context.abrupt("return",textObject);case 24:case"end":return _context.stop()}},_callee)}))}exports.Service=Service,Service.settings={ajaxTimeout:30},Service.isClass=function(){var e=Function.prototype.toString;return function(t){return"function"==typeof t&&(/^class(\s|\{\}$)/.test(e.call(t))||/^.*classCallCheck\(/.test(function(t){return e.call(t).replace(/^[^{]*{\s*/,"").replace(/\s*}[^}]*$/,"")}(t)))}}()},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e,t,n,r){return(u="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var o,u=c(e,t);if(u){if((o=Object.getOwnPropertyDescriptor(u,t)).set)return o.set.call(r,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(r,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(r,t,o)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,t,n);return!0})(e,t,n,r)}function i(e,t,n,r,o){if(!u(e,t,n,r||e)&&o)throw new Error("failed to set property");return n}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=c(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}Object.defineProperty(t,"__esModule",{value:!0});var v=function(){function e(t){p(this,e),this.items=new Array,this._value=t}return y(e,[{key:"attach",value:function(e,t){return void 0!==this.value&&e(this.value,t),this.add(e,t)}},{key:"add",value:function(e,t){return this.items.push({func:e,sender:t}),e}},{key:"remove",value:function(e){this.items=this.items.filter(function(t){return t.func!=e})}},{key:"fire",value:function(e){this.items.forEach(function(t){return t.func(e,t.sender)})}},{key:"value",get:function(){return void 0===this._value?null:this._value},set:function(e){this._value=e,this.fire(e)}}]),e}();t.ValueStore=v;var h=function(e){function t(e){var n;return p(this,t),(n=o(this,l(t).call(this,t.loadValue(e)))).storageName=e,n}return s(t,v),y(t,[{key:"value",get:function(){return a(l(t.prototype),"value",this)},set:function(e){i(l(t.prototype),"value",e,this,!0),t.saveValue(this.storageName,e)}}],[{key:"loadValue",value:function(e){var t=localStorage.getItem(e);return null==t?null:JSON.parse(t)}},{key:"saveValue",value:function(e,t){null!=t?localStorage.setItem(e,JSON.stringify(t)):localStorage.removeItem(e)}}]),t}();t.LocalValueStore=h;var b=function(e){function t(e){var n;return p(this,t),(n=o(this,l(t).call(this,t.loadValue(e)))).storageName=e,n}return s(t,v),y(t,[{key:"value",get:function(){return a(l(t.prototype),"value",this)},set:function(e){i(l(t.prototype),"value",e,this,!0),t.saveValue(this.storageName,e)}}],[{key:"loadValue",value:function(e){var n=t.getCookie(e);return null==n?null:JSON.parse(n)}},{key:"saveValue",value:function(e,n){null!=n?t.setCookie(e,JSON.stringify(n)):t.removeCookie(e)}},{key:"setCookie",value:function(e,t,n){if("undefined"!=typeof document){var r="";if(n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3),r="; expires="+o.toUTCString()}document.cookie=e+"="+(t||"")+r+"; path=/"}}},{key:"getCookie",value:function(e){if("undefined"==typeof document)return null;for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null}},{key:"removeCookie",value:function(e){this.setCookie(e,"")}}]),t}();t.CookieValueStore=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Login=282]="Login",e[e.Logout=283]="Logout",e[e.NotFound=404]="NotFound",e[e.OK=200]="OK",e[e.Redirect=301]="Redirect",e[e.BadRequest=400]="BadRequest",e[e.Forbidden=403]="Forbidden",e[e.ArgumentNull=705]="ArgumentNull",e[e.FieldNull=709]="FieldNull",e[e.ArgumentTypeIncorrect=710]="ArgumentTypeIncorrect",e[e.UserNotLogin=718]="UserNotLogin",e[e.NoPermission=726]="NoPermission",e[e.UserIdNull=727]="UserIdNull",e[e.ObjectNotExistWithId=728]="ObjectNotExistWithId"}(t.StatusCode||(t.StatusCode={}))}])});
//# sourceMappingURL=index.es5.min.js.map