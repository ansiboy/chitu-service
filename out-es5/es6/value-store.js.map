{"version":3,"sources":["../../out/es6/value-store.js"],"names":["Object","defineProperty","exports","value","ValueStore","items","Array","_value","undefined","func","sender","push","filter","o","forEach","fire"],"mappings":"AAAA;;;;;;;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACA;;;;IAGMC,U;;;AACF,sBAAYD,KAAZ,EAAmB;AAAA;;AACf,SAAKE,KAAL,GAAa,IAAIC,KAAJ,EAAb;AACA,SAAKC,MAAL,GAAcJ,KAAK,KAAKK,SAAV,GAAsB,IAAtB,GAA6BL,KAA3C;AACH;;;;wBACGM,I,EAAMC,M,EAAQ;AACd,WAAKL,KAAL,CAAWM,IAAX,CAAgB;AAAEF,QAAAA,IAAI,EAAJA,IAAF;AAAQC,QAAAA,MAAM,EAANA;AAAR,OAAhB;AACA,aAAOD,IAAP;AACH;;;2BACMA,I,EAAM;AACT,WAAKJ,KAAL,GAAa,KAAKA,KAAL,CAAWO,MAAX,CAAkB,UAAAC,CAAC;AAAA,eAAIA,CAAC,CAACJ,IAAF,IAAUA,IAAd;AAAA,OAAnB,CAAb;AACH;;;yBACIN,K,EAAO;AACR,WAAKE,KAAL,CAAWS,OAAX,CAAmB,UAAAD,CAAC;AAAA,eAAIA,CAAC,CAACJ,IAAF,CAAON,KAAP,EAAcU,CAAC,CAACH,MAAhB,CAAJ;AAAA,OAApB;AACH;;;wBACW;AACR,UAAI,KAAKH,MAAL,KAAgBC,SAApB,EACI,OAAO,IAAP;AACJ,aAAO,KAAKD,MAAZ;AACH,K;sBACSJ,K,EAAO;AACb,WAAKI,MAAL,GAAcJ,KAAd;AACA,WAAKY,IAAL,CAAUZ,KAAV;AACH;;;;;;AAELD,OAAO,CAACE,UAAR,GAAqBA,UAArB","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * 实现数据的存储，以及数据修改的通知\r\n */\r\nclass ValueStore {\r\n    constructor(value) {\r\n        this.items = new Array();\r\n        this._value = value === undefined ? null : value;\r\n    }\r\n    add(func, sender) {\r\n        this.items.push({ func, sender });\r\n        return func;\r\n    }\r\n    remove(func) {\r\n        this.items = this.items.filter(o => o.func != func);\r\n    }\r\n    fire(value) {\r\n        this.items.forEach(o => o.func(value, o.sender));\r\n    }\r\n    get value() {\r\n        if (this._value === undefined)\r\n            return null;\r\n        return this._value;\r\n    }\r\n    set value(value) {\r\n        this._value = value;\r\n        this.fire(value);\r\n    }\r\n}\r\nexports.ValueStore = ValueStore;\r\n"],"file":"value-store.js"}